<%= render 'header' %>
<div class='box tabular new_issue'>
  <%= form_for(@risk, url: update_risk_path(risk_id: @risk.id)) do |f| %>
      <% if @risk.errors.any? %>
          <div id="error_explanation">
            <h2><%= pluralize(@risk.errors.count, "error") %> prohibited this risk from being saved:</h2>

            <ul>
              <% @risk.errors.full_messages.each do |msg| %>
                  <li><%= msg %></li>
              <% end %>
            </ul>
          </div>
      <% end %>

      <div class="splitcontentleft">
        <p>
          <label for="risk_title"><%= Risk.human_attribute_name :title %> <span class="required">*</span></label>
          <%= f.text_field :title, :required => true %>
        </p>
        <p>
          <%= f.label :status %>
          <%= f.select(:status, options_for_select(options_for_status, @risk.status)) %>
        </p>
        <p>
          <%= f.label :origin %>
          <%= f.select(:origin, options_for_select(options_for_origin, @risk.origin)) %>
        </p>
      </div>
      <div class="splitcontentright">
        <p>
          <%= f.label :effort %>
          <%= f.text_field :effort %>
        </p>
        <p>
          <%= f.label :cost %>
          <%= f.text_field :cost %>
        </p>
      </div>
      <p>
        <%= f.label :description %>
        <%= f.text_area :description, :class => 'wiki-edit', :rows => 10, :cols => 60 %>
      </p>
      <div class="splitcontentleft">
        <p>
          <%= f.label :source %>
          <%= f.select(:source, options_for_select(options_for_source, @risk.source), id: 'risk_source', prompt: t('.select_one_source')) %>
        </p>
        <p>
          <%= f.label :category %>
          <%= f.select(:category, options_for_select(@risk_categories , @risk.category), id: 'risk_category', prompt: t('.select_one_category')) %>
        </p>
        <p>
          <%= f.label :probability %>
          <%= f.number_field :probability %>
        </p>
        <p>
          <%= f.label :impact %>
          <%= f.number_field :impact %>
        </p>
        <p>
          <%= f.label :priority %>
          <%= f.number_field :priority %>
        </p>
      </div>
      <div class="splitcontentright">
        <p>
          <%= f.label :identification_date %>
          <%= f.date_select :identification_date %>
        </p>
        <p>
          <%= f.label :created_by %>
          <%= text_field_tag '', User.find(@risk.created_by).name, readonly: true, disable: true unless @risk.created_by.nil?%>
          <%= f.hidden_field :created_by, value: @risk.created_by %>
        </p>
        <p>
          <%= f.label :assigned_to %>
          <%= f.collection_select(:assigned_to, User.joins(:members).where("members.project_id = ?", @project.id), :id, :name, prompt: t('.select_one_member') ) %>
        </p>
        <p>
          <%= f.label :strategy %>
          <%= f.select(:strategy, options_for_select(options_for_strategy, @risk.strategy)) %>
        </p>
      </div>
      <p>
        <%= f.label :trigger %>
        <%= f.text_area :trigger, :class => 'wiki-edit', :rows => 10, :cols => 60 %>
      </p>
      <p>
        <%= f.submit %>
      </p>
  <% end %>
</div>